<?php
// phpinfo();
header('Content-Type: text/html; charset=utf-8');

define('INTERNAL_HOST', 'loongbao24.hb.lohu.info:81');

define('NEWS', [
	114520 => [
		'internal' => true,
		// 'ip' => [
		// 	[unpack('N', inet_pton('127.0.0.1'))[1], 32],
		// 	[unpack('N', inet_pton('172.20.24.0'))[1], 24]
		// ],
		'title' => '【内部】为留校职工发放龙年春节红包的通知',
		'content' => <<<EOF
<p>找到这个页面的办网专家：</p>
<p>恭喜你获得本次新年红包之一！请使用 92391909 作为口令领取红包吧！ </p>
<p style="text-align: right;">
	foobar 院新年红包研究所
	<br />
	2024 年 2 月 11 日
</p>
EOF
	],
	114519 => [
		'title' => '防范极端天气与寒潮的紧急通知',
		'content' => <<<EOF
<p>各位同事：</p>
<p>根据有关部门的通知与公告，一场寒潮天气过程正在强势冲来，全国各地预计都有明显的降温过程，还会有包括暴雪、冻雨在内的恶劣天气。</p>

<p>为全面做好风险防范和化解，各部门都要提高思想认识，守牢安全底线。要高度重视本轮寒潮天气带来的不利影响，牢固树立生命至上的理念，把生命财产安全摆在首位，切忌麻痹大意，心存侥幸，一定要按照职能职责，加强抢险救援力量、物资预置和调派，提前做好救灾救助各项准备，全力做好突发险情灾情应对处置，严防人员伤亡和重大财产损失。</p>

<p>近日离院的同事也需做好个人防寒保暖工作，做好在外滞留准备。如有需要也可联系后勤处寻求一定的帮助。</p>

<p style="text-align: right;">
	foobar 院新年红包研究所后勤处
	<br />
	2024 年 1 月 28 日
</p>
EOF
	],
	114518 => [
		'title' => '关于研究所2024年春节假期安排的通知',
		'content' => <<<EOF
<p>各位同事、同学：</p>
<p>玉兔辞旧岁，腾龙迎新春。时间飞逝，一年的科研工作又到了尾声。根据有关通知精神，结合我院工作实际，我处现将今年春节假期放假安排公布如下：</p>
<ol>
	<li>研究人员可不早于 2 月 1 日（腊月廿二）离院，不晚于 2 月 25 日（正月十六）返院，离开前和返回后均需在 OA 办理登记。</li>
	<li>后勤、行政人员假期自 2 月 8 日（腊月廿九）起至 2 月 18 日（正月初九）止。</li>
	<li>安保、运维等关键岗位安排轮班，并根据有关规定发放加班工资。</li>
</ol>
<p>祝大家度过一个愉快、祥和的春节假期，如有疑问可联系电子邮箱 monkey@foobar.ac.cn。</p>
<p style="text-align: right;">
	foobar 院新年红包研究所后勤处
	<br />
	2024 年 1 月 19 日
</p>
EOF
	],
	114517 => [
		'title' => '2023年所长办公室工作报告',
		'content' => <<<EOF
<p>这个研究所就是春节红包临时成立的，哪来的工作报告。公开的新闻凑合看下就好。</p>
<p style="text-align: right;">
	foobar 院新年红包研究所所长办公室
	<br />
	2023 年 12 月 31 日
</p>
EOF
	],
	114516 => [
		'title' => '2023年第一批研究所公开选聘岗位',
		'content' => <<<EOF
<p>根据有关规定，foobar 院新年红包研究所拟面向社会公开选聘工作人员。现将有关事项公告如下：</p>

<p><b>一、单位介绍</b></p>
<p>foobar 院新年红包研究所是一所高水平应用型整活研究所，坐落于赛博世界。</p>

<p><b>二、选聘计划及条件</b></p>
<p>本次选聘需求为 2 个岗位共 3 人，岗位名称、选聘人数及具体要求详见下文。候选人需要具有以下条件：</p>
<ol>
	<li>遵纪守法，品行端正；</li>
	<li>具备岗位所需的学历学位、资历、专业和技能条件；</li>
	<li>具备适应岗位要求的身体条件；</li>
	<li>具备岗位所需要的其他条件。</li>
</ol>

<p><b>三、选聘岗位</b></p>
<table border="1">
<thead>
	<tr>
		<th>岗位名称</th>
		<th>需求人数</th>
		<th>工作内容</th>
	</tr>
</thead>
<tbody>
	<tr>
		<td>楼内保洁</td>
		<td>2</td>
		<td>负责打扫楼道、一号业务包间、二号业务大厅等室内设施。</td>
	</tr>
	<tr>
		<td>摸鱼官</td>
		<td>1</td>
		<td>我院本年度新购铜鱼一只，需要将其摸至光滑透亮，重量减少不得少于 2g，且外观样式不得改变。</td>
	</tr>
</tbody>
</table>

<p><b>四、联系方式</b></p>
请将简历发送至 renshi@foobar.ac.cn，人事部门收到后将在猴年马月联系您。

<p style="text-align: right;">
	foobar 院新年红包研究所后勤处
	<br />
	2023 年 7 月 3 日
</p>
EOF
	],
	114515 => [
		'hidden' => true,
		'title' => '【内部】关于研究所试用下一代VPN服务的通知',
		'content' => <<<EOF
<p>各位同志：</p>
<p>根据有关精神，我院正在试点基于 SRv6 的 VPN 业务，欢迎体验。由于目前该技术的 VPN 尚属于试用阶段，且 SRv6 VPN 需要用户终端有路由至机器的 IPv6 地址（院内网络符合此条件），应用范围尚不够广泛，因此我中心仅提供 Linux 支持（网关目前也使用 Linux 部署）。若想试用请跟从以下指示完成：</p>
<ol>
	<li>在 OA 系统 VPN 区进入“SRv6 测试”分区，记录下系统分配的 HMAC Key ID、HMAC Key、网关地址、IP 地址等信息，这些信息都是下面尖括号中需要填写的内容。</li>
	<li>取 1 个路由到本地机器的 IPv6 地址，在“SRv6 对端”中填入并保存，这个地址将用作解封装入向 SRv6 报文，下面用 <code>&lt;路由至本地的 IP&gt;</code> 表示这个地址。</li>
	<li>使用 <code>sysctl -w net.ipv6.conf.all.forwarding=1</code> 开启本机的 IPv6 转发能力。</li>
	<li>使用 <code>ip netns add fbvpn</code> 创建用于处理 SRv6 入向报文的 netns。</li>
	<li>使用 <code>ip netns exec fbvpn sysctl -w net.ipv6.conf.all.seg6_enabled=1 net.ipv6.conf.all.seg6_require_hmac=1 net.ipv6.conf.all.forwarding=1</code> 开启 netns 中的 SRv6 处理能力和转发能力。</li>
	<li>使用 <code>ip link add fbvpn type veth peer name fbvpn-main && ip link set dev fbvpn up</code> 创建连接到 netns 中的网线。</li>
	<li>使用 <code>ip link set dev fbvpn-main netns fbvpn && ip -n fbvpn link set dev fbvpn-main up</code> 将网线的另一端移入 netns。</li>
	<li>使用 <code>ip addr add dev fbvpn fe80::1/64 ; ip -n fbvpn addr add dev fbvpn-main fe80::2/64</code> 设置网线两端的链路 IP。</li>
	<li>使用 <code>ip -n fbvpn -6 route add dev fbvpn-main default via fe80::1 metric 10</code> 将 netns 中的默认路由指向外面。</li>
	<li>使用 <code>ip -n fbvpn sr hmac set &lt;HMAC Key ID&gt; sha1</code> 在 netns 里面设置用于校验入向 SRv6 报文的 HMAC 密钥，在后面提示输入密码时填入系统分配的 HMAC Key。</li>
	<li>使用 <code>ip sr hmac set &lt;HMAC Key ID&gt; sha1</code> 在 netns 里面设置用于签名出向 SRv6 报文的 HMAC 密钥，在后面提示输入密码时填入系统分配的 HMAC Key（和上面一样）。</li>
	<li>使用 <code>ip addr add dev lo &lt;VPN IP 地址&gt;/128</code> 将系统分配的 VPN IP 绑定到本机。</li>
	<li>使用 <code>ip route add dev fbvpn &lt;路由至本地的 IP&gt;/128 via fe80::2</code> 将 SRv6 解封装地址转发进 netns 处理。</li>
	<li>使用 <code>ip -n fbvpn route add &lt;路由至本地的 IP&gt;/128 encap seg6local action End.DX6 nh6 :: dev fbvpn-main</code> 设置 SRv6 的解封装动作。</li>
	<li>使用 <code>ip route add fd24:fbac::/32 src &lt;VPN IP 地址&gt; mtu 1280 encap seg6 mode encap segs &lt;网关地址&gt; hmac &lt;HMAC Key ID&gt; dev &lt;本地出口网卡名&gt;</code> 以正确的源地址 IP 开通本机到网关的路由，即可通过 SRv6 网关访问院内资源了。</li>
</ol>
<p>配置成功后效果应当如下图所示：</p>
<p style="text-align: center;"><img src="srv6.png" style="max-width: 95%;" /></p>
<p>该功能尚处于测试阶段，网关一端的配置难免会有失误、错漏，在试用过程中有任何问题欢迎联系信息技术中心咨询。</p>
<p style="text-align: right;">
	foobar 院新年红包研究所信息技术中心
	<br />
	2023 年 6 月 19 日
</p>
EOF
	],
	114514 => [
		'title' => '2023年“温暖送学生”活动的通知',
		'content' => <<<EOF
<p>各位同学：</p>
<p>为体现出对学生的关怀，本研究所启动 2023 年“温暖送学生”活动，今年活动如下：</p>
<ol>
	<li>所有学生可获得研究所的新年祝福邮件。</li>
	<li>安排了田所浩、叶守等学长前往部分同学家拜访，并将送上学校定制红茶、对联等新春礼品。</li>
</ol>
<p>祝大家新年快乐，如有疑问可联系电子邮箱 soha@foobar.ac.cn。</p>
<p style="text-align: right;">
	foobar 院新年红包研究所所长办公室
	<br />
	2023 年 1 月 16 日
</p>
EOF
	]
]);
